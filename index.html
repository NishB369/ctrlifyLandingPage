<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="./src/output.css" rel="stylesheet" />
    <link rel="stylesheet" href="./style.css" />
    <link rel="stylesheet" href="./fonts.css" />
    <link rel="icon" href="./public/media/images/Favicon.png" />
    <title>Ctrilfy, Financial Chaos to Ctrl</title>
    <style>
      html.lenis,
      html.lenis body {
        height: auto;
      }

      .lenis.lenis-smooth {
        scroll-behavior: auto !important;
      }

      .lenis.lenis-smooth [data-lenis-prevent] {
        overscroll-behavior: contain;
      }

      .lenis.lenis-stopped {
        overflow: hidden;
      }

      .lenis.lenis-smooth iframe {
        pointer-events: none;
      }
    </style>
  </head>

  <body>
    <!-- Hero and Why Sections -->
    <div class="px-20 py-4">
      <!-- Grid Lines -->
      <div
        style="
          background-image: url(./public/media/images/GridLines.png);
          background-position: center;
          background-size: cover;
        "
        class="h-[550px] w-[100vw] absolute top-0 left-0 overflow-x-hidden"
      ></div>

      <!-- Navbar -->
      <div
        class="w-[90%] py-2 rounded-full px-4 flex items-center justify-between text-white fixed top-4 z-20 backdrop-blur-sm bg-[#121826]/75 border border-white/20"
      >
        <!-- Logo -->
        <a href="#hero-section" class="cursor-pointer">
          <img src="./public/media/images/Logo.png" class="w-20"
        /></a>

        <!-- Nav Links -->
        <div class="flex items-center justify-between gap-20">
          <a href="#why-section" class="cursor-pointer">Why</a>
          <a href="#features-section" class="cursor-pointer">Features</a>
          <a href="#demovid-section" class="cursor-pointer">Demo</a>
        </div>

        <!-- Get Started Button -->
        <button
          class="text-[#121826] font-semibold px-4 py-2 rounded-full cursor-pointer"
          style="
            background: radial-gradient(
              circle at 0% 0%,
              #fff600,
              #ffd900,
              #ffd900,
              #ffd900,
              #ffa900
            );
          "
        >
          Get Started
        </button>
      </div>

      <!-- Hero Section -->
      <div
        id="hero-section"
        class="h-[550px] mt-4 pt-20 flex flex-col items-center justify-center text-[#121826] relative"
      >
        <!-- Gradient End -->
        <div
          class="w-[100vw] h-[12.5%] absolute bottom-0 z-10"
          style="
            background: linear-gradient(
              180deg,
              rgba(255, 255, 255, 0) 0%,
              #0171ff 250%
            );
          "
        ></div>

        <!-- Text Container -->
        <div class="text-center">
          <div
            class="text-7xl font-black tracking-wider"
            style="font-family: agrandir-glight"
          >
            Financial
          </div>

          <div
            class="flex items-center justify-center font-semibold text-6xl -mt-2 gap-2 tracking-wide"
          >
            <div>Chaos</div>
            <div class="bg-[#0171ff] px-10 py-2 rounded-full">
              <img src="./public/media/images/RightArrow.png" class="w-20" />
            </div>
            <div>Ctrl</div>
          </div>
        </div>

        <!-- Buttons Container -->
        <div class="flex items-center justify-between gap-2 mt-4">
          <!-- Get Started Button -->
          <button
            class="text-[#121826] font-semibold px-6 py-2 rounded-sm border-2 cursor-pointer"
            style="
              background: radial-gradient(
                circle at 0% 0%,
                #fff600,
                #ffd900,
                #ffd900,
                #ffd900,
                #ffa900
              );
            "
          >
            Get Started
          </button>

          <!-- Demo Btn -->
          <a href="#demovid-section">
            <button
              class="text-white font-semibold px-6 py-2 border-2 border-black rounded-sm cursor-pointer bg-[#121826]"
            >
              Watch Demo
            </button></a
          >
        </div>

        <!-- Images Container -->
        <div class="overflow-hidden px-60 mt-6 relative">
          <img
            src="./public/media/images/BalanceImg.png"
            class="w-60 absolute left-20 top-12"
          />
          <img
            src="./public/media/images/ChartImg.png"
            class="w-50 absolute top-20 right-24"
          />
          <img
            src="./public/media/images/RsCoin.png"
            class="w-30 absolute right-44"
          />
          <img src="./public/media/images/MainPhone.png" class="w-96" />
        </div>
      </div>

      <!-- Why Section -->
      <div
        class="py-20 px-30 flex items-center justify-center gap-16"
        id="why-section"
      >
        <!-- Left Section -->
        <div class="w-1/2 flex flex-col gap-4">
          <div class="text-6xl font-semibold">Why Ctrilfy?</div>

          <div class="text-xl">
            Drowning in scattered income, missed expenses, and forgotten savings
            goals?
          </div>

          <!-- Pointers Section -->
          <div class="flex flex-col gap-2">
            <div class="w-full flex justify-end">
              <div
                class="bg-[#121826] border-[#121826] border-2 flex items-center justify-center text-white py-2 rounded-md w-[65%] font-semibold text-xl leading-6"
              >
                <div class="w-3/4">No single place to manage everything</div>
              </div>
            </div>

            <div class="w-full flex">
              <div
                class="bg-[#0171ff] border-[#121826] border-2 flex items-center justify-center text-white py-2 rounded-md w-[65%] font-semibold text-xl leading-6"
              >
                <div class="w-3/4">Unclear where your money goes</div>
              </div>
            </div>

            <div class="w-full flex justify-end">
              <div
                class="bg-[#121826] border-[#121826] border-2 flex items-center justify-center text-white py-2 rounded-md w-[65%] font-semibold text-xl leading-6"
              >
                <div class="w-3/4">Unable to invest money in savings</div>
              </div>
            </div>

            <div class="w-full flex">
              <div
                class="bg-[#0171ff] border-[#121826] border-2 flex items-center justify-center text-white py-2 rounded-md w-[65%] font-semibold text-xl leading-6"
              >
                <div class="w-3/4">Overwhelmed by financial chaos</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Cards -->
        <div class="w-1/2">
          <video
            src="./public/media/videos/FlyingMoneyCard.mp4"
            autoplay
            muted
            loop
            class="rounded-sm"
          ></video>
        </div>
      </div>
    </div>

    <!-- Canvas Section -->
    <div class="relative w-full h-[1500vh]" id="features-section">
      <div class="w-full sticky top-0 left-0 overflow-hidden">
        <canvas class="w-full h-screen" id="canvas"></canvas>
      </div>
    </div>

    <!-- Demo Video Section -->
    <div class="px-20 pt-20 relative overflow-hidden" id="demovid-section">
      <div class="w-full flex flex-col items-center justify-center">
        <!-- Text Container -->
        <div
          class="text-5xl font-semibold text-[#121826] text-center leading-12 w-3/4"
          style="font-family: agrandir-textbold"
        >
          Watch <span class="text-[#0171ff] italic">Ctrilfy</span> Transform
          Your Finances
        </div>

        <!-- Video Container -->
        <div
          id="parent"
          class="bg-[#0171ff] p-20 w-full h-[50vh] mt-40 rounded-t-[100px] border-2 relative flex justify-center"
        >
          <video
            id="demoVid"
            src="./public/media/videos/Demo.mp4"
            class="rounded-[40px] absolute scale-85 -top-30"
            autoplay
            muted
            loop
          ></video>
        </div>
      </div>
    </div>

    <!-- Mobile Banner -->
    <div class="px-40 py-20">
      <div
        class="border-2 h-[300px] rounded-xl"
        style="
          background-image: radial-gradient(
              circle at 0% 0%,
              rgba(1, 113, 255, 0.245) 0%,
              rgba(1, 113, 255, 0.445) 20%,
              rgba(1, 113, 255, 0.75) 40%,
              #0171ff 60%,
              #0171ff 75%,
              #1a51d1 90%,
              #121826 100%
            ),
            url('./public/media/images/GridLines.png');
          background-size: cover;
          background-repeat: no-repeat;
        "
      >
        <div
          class="flex items-center justify-center gap-10 w-full p-10 h-full pr-10"
        >
          <div class="flex flex-col items-end justify-center gap-2 w-[60%]">
            <div
              class="text-6xl font-semibold"
              style="font-family: agrandir-textbold"
            >
              Try On Mobile
            </div>
            <div
              class="text-3xl text-white font-semibold text-shadow-2xs text-right"
            >
              Control Your Finances,<br />Anytime, Anywhere.
            </div>
          </div>
          <div class="w-[40%] flex items-center justify-start">
            <img src="./public/media/images/qr.png" alt="" class="w-3/4" />
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="w-full px-20 h-[200px]">
      <div
        class="bg-[#121826] rounded-t-[100px] h-full flex items-center justify-between px-20"
      >
        <div class="w-1/3">
          <img src="./public/media/images/Logo.png" alt="" class="w-40" />
          <div class="text-white -mt-4 text-xl ml-4">
            Financial chaos to ctrl
          </div>
        </div>
        <div class="flex items-center justify-center flex-col gap-2 w-1/3">
          <div class="text-white text-xl">Satisfied, Checkout the WebApp!</div>
          <button
            class="text-[#121826] font-semibold px-4 py-2 rounded-full cursor-pointer border-2 border-white w-full"
            style="
              background: radial-gradient(
                circle at 0% 0%,
                #fff600,
                #ffd900,
                #ffd900,
                #ffd900,
                #ffa900
              );
            "
          >
            Get Started
          </button>
          <div class="mt-1 w-full text-center text-white">
            Made with 🔥 by
            <a href=""><span class="font-semibold underline">Nishchay</span></a>
          </div>
        </div>
        <div
          class="flex flex-col text-white text-xl font-semibold text-right w-1/3"
        >
          <div>Why</div>
          <div>Features</div>
          <div>Demo</div>
        </div>
      </div>
    </div>

    <!-- GSAP Script -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"
      integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <!-- Scroll Trigger Script -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"
      integrity="sha512-onMTRKJBKz8M1TnqqDuGBlowlH0ohFzMXYRNebz+yOcc5TQr/zAKsthzhuv0hiyUKEiQEQXEynnXCvNTOk50dg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <!-- Lenis Script -->
    <script src="https://unpkg.com/lenis@1.1.13/dist/lenis.min.js"></script>

    <!-- Scorll Frame Animation Script -->
    <script>
      const canvas = document.querySelector("#canvas");
      const context = canvas.getContext("2d");
      const frames = {
        currentIndex: 1,
        maxIndex: 372,
      };

      const images = [];
      let imagesLoaded = 0;
      let audioStarted = false;

      function preloadImages() {
        for (var i = 1; i <= frames.maxIndex; i++) {
          const imageUrl = `/Frames/frame_${i
            .toString()
            .padStart(4, "0")}.jpeg`;
          const img = new Image();
          img.src = imageUrl;

          img.onload = function () {
            imagesLoaded++;
            if (imagesLoaded === frames.maxIndex) {
              loadImage(frames.currentIndex);
              startAnimation();
            }
          };

          images.push(img);
          console.log(imagesLoaded);
        }
      }

      function loadImage(index) {
        if (index >= 0 && index <= frames.maxIndex) {
          const img = images[index];

          canvas.width = window.innerWidth;
          canvas.height = window.innerHeight;

          const scaleX = canvas.width / img.width;
          const scaleY = canvas.height / img.height;
          const scale = Math.max(scaleX, scaleY);

          const newWidth = img.width * scale;
          const newHeight = img.height * scale;

          const offsetX = (canvas.width - newWidth) / 2;
          const offsetY = (canvas.height - newHeight) / 2;

          context.clearRect(0, 0, canvas.width, canvas.height);
          context.imageSmoothingEnabled = true;
          context.imageSmoothingQuality = "high";
          context.drawImage(img, offsetX, offsetY, newWidth, newHeight);

          frames.currentIndex = index;
        }
      }

      function startAnimation() {
        var tl = gsap.timeline({
          scrollTrigger: {
            trigger: ".parent",
            start: "top top",
            scrub: 2,
            end: "bottom bottom",
          },
        });

        function updateFrame(index) {
          return {
            currentIndex: index,
            ease: "linear",
            onUpdate: function () {
              loadImage(Math.floor(frames.currentIndex));
            },
          };
        }

        tl.to(frames, updateFrame(70), "a")

          .to(frames, updateFrame(140), "b")
          .to("canvas", { scale: 0.5, ease: "linear " }, "b")

          .to(frames, updateFrame(372), "c")
          .to("canvas", { scale: 1, ease: "linear " }, "c");
      }

      window.addEventListener("resize", function () {
        loadImage(Math.floor(frames.currentIndex));
      });

      const lenis = new Lenis();

      function raf(time) {
        lenis.raf(time);
        requestAnimationFrame(raf);
      }

      requestAnimationFrame(raf);

      preloadImages();

      // Replace the existing demoVid animation code block with this:
      const demoVid = document.querySelector("#demoVid");

      // First, enable 3D transformations
      gsap.set("#parent", {
        perspective: 1000,
      });

      gsap.set(demoVid, {
        scale: 2,
        rotationX: 60,
        transformOrigin: "center top",
      });

      gsap.to(demoVid, {
        scrollTrigger: {
          trigger: "#parent",
          start: "top bottom",
          end: "top center",
          scrub: 4,
          markers: false,
          toggleActions: "play none none reverse",
        },
        scale: 0.75,
        rotationX: 0,
      });
    </script>
  </body>
</html>
